## 三次握手的目的是什么？为什么不用两次和四次？
三次握手的目的主要有3点
1.三次握手可以阻止历史连接、避免资源浪费  （二次握手，服务端没有SYN-RECV状态，直接进入ESTBALISH状态，会产生多个冗余的无效连接）
2.同步双方的初始序列

两次握手只能保证单向链路可以通信，理论上来说，要保证双向链路，需要四次握手，但是实际上服务端给客户端发送的SYN和ACK数据包可以合并为一次握手，所以只需要三次握手，
## 挥手为什么需要四次？三次不行吗？
挥手阶段中服务端的 ACK 和 FIN 数据包不能合为一次。因为挥手阶段的流程为客户端发送FIN数据包表示自己发完了，服务端立即回复 ACK 数据包表示自己知道了，此时客户端到服务端的连接已经释放了，客户端不会再发送数据了，但服务端还可以继续向客户端发送数据，等到服务端也完成了数据发送，才会发送 FIN，这时客户端回复 ACK，就可以结束通信了

## 为什么在四次挥手中客户端要等待2MSL
MSL是报文最大生存时间，超过这个时间报文会被丢弃，因为TCP报文基于IP协议，IP协议中有个字段是 TTL ，就是TIME TO LIFE 表示报文在网络中传输的生存时间，经过一个处理它的路由器就减1，所以MSL 应该要阿玉等于 TTL 消耗为0的时间，以确保报文被自然消亡。
**TTL 一般是 64， Linux中把MSL设置为30秒，意味着Linux认为树经过64个路由器的时间不会超过30秒，超时认为报文消失在网络中**而 TIME_WAIT 等待2MSL时间表示报文一来一回的时间，如果服务端没有接受到ACK，则会超时重发FIN，客户端接受到FIN，返回ACK，这一过程正好是2MSL，**允许报文丢失一次**连续两次丢包的概率性微乎其微，所以设置为2MSL

## TCP在握手阶段怎么管理客户端的连接
