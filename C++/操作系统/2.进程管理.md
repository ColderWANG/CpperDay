- [1 进程](#1-进程)
  - [1.1 进程的组织](#11-进程的组织)
  - [1.2 进程的特征](#12-进程的特征)
- [2 进程的状态与转换](#2-进程的状态与转换)
  - [2.1 进程的三种基本状态](#21-进程的三种基本状态)
  - [2.2 另外两种状态](#22-另外两种状态)
  - [2.3 进程状态的转换](#23-进程状态的转换)
- [3 进程控制](#3-进程控制)
- [4 进程通信](#4-进程通信)
  - [4.1 共享存储](#41-共享存储)
  - [4.2 管道通信](#42-管道通信)
  - [4.3 消息传递](#43-消息传递)
- [5 线程概念和多线程模型](#5-线程概念和多线程模型)
  - [5.1 线程的实现方式](#51-线程的实现方式)

# 1 进程
引入多道程序技术后，系统为每个运行的程序配置一个数据结构，称为进程控制块（PCB），PCB、程序段、数据段构成了**进程实体（进程映像）**，PCB是进程存在的唯一标志。

比较传统的定义是：程序的依次执行过程，强调动态性，而进程实体强调静态性。

## 1.1 进程的组织
1. 链接方式 按进程状态将PCB分为多个队列
2. 索引方式 按进程状态建立索引表，各表项指向一个PCB

## 1.2 进程的特征
1. 动态性 进程最基本的特征
2. 并发性
3. 独立性 进程是资源分配、接受调度的独立单位
4. 异步性 各进程以不可预知的速度向前推进，可能导致运行结构的不确定性
5. 结构性

# 2 进程的状态与转换
## 2.1 进程的三种基本状态
1. 运行态 占有CPU ，在CPU上运行
2. 就绪态 已经具备运行条件，但没用空闲CPU，暂时不能运行
3. 阻塞态 等待某一事件而暂时不能运行

## 2.2 另外两种状态
1. 创建态 进程正在被创建，分配资源，初始化PCB
2. 终止态 进程正在从系统被撤销，回收拥有的资源，撤销PCB

## 2.3 进程状态的转换
运行态到阻塞态，是主动的行为，通过系统调用
阻塞态到就绪态，是被动的行为。

# 3 进程控制
实现状态的转换。   

通过原语实现进程控制，**关中断**和**开中断**之间，不会响应中断。

进程的创建，从无到创建态到就绪态（创建原语）。进程的终止，从就绪态/阻塞态/运行态到终止态到无（撤销原语）。进程的阻塞和唤醒，从运行态到阻塞态（阻塞原语），从阻塞态到就绪态（唤醒原语）。进程的切换，运行态到阻塞态/就绪态 就绪态到运行态（切换原语）。

# 4 进程通信
各进程拥有内存地址空间相互独立，无法直接访问另一个进程的地址空间

## 4.1 共享存储
两个进程对共享空间的访问必须是**互斥**的
1. 基于数据结构的共享 如放一个长度为10的数组，速度慢，限制多，是一种**低级通信**方式
2. 基于存储区的共享 在内存中划一块共享存储区，速度更快，是一种**高级通信**方式

## 4.2 管道通信
在内存中开辟一个固定大小的缓冲区
1. 半双工 ，要实现双方通信要两个管道
2. 互斥
3. 管道写满 写进程的 write 调用阻塞， 管道变空，读进程的read调用阻塞。
4. 没写满，就不允许读，没读空，不允许写
5. 读后消息就会丢失，所以只能有一个读管道

## 4.3 消息传递
进程的数据交换以**格式化消息message**为单位，通过发送/接受消息两个**原语**实现
1. 直接通信方式 消息直接挂到接受进程的消息缓冲队列
2. 间接通信方式 消息先发送到中间实体（信箱），读进程从信箱中读取消息

# 5 线程概念和多线程模型
进程并发地执行多个程序，线程是**程序执行流地最小单位**

在引入线程之前，进程是资源分配、调度的基本单位。引入线程后，**进程**变为**资源分配**的基本单位，**线程**是**调度**的基本单位。

所以线程几乎不拥有系统资源，同一进程的不同线程共享进程的资源，**共享内存地址空间**

## 5.1 线程的实现方式
1. 用户级线程 线程管理工作由应用程序负责，在用户态下可以完成线程切换
2. 内核级线程 线程管理工作由操作系统内核负责，在核心态下完成线程切换
因为操作系统内核只能看见内核级线程，所以**内核级线程才是处理机分配的单位**
