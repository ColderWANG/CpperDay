- [1 操作系统的功能和目标](#1-操作系统的功能和目标)
  - [1.1 操作系统作为系统资源的管理者，需要提供](#11-操作系统作为系统资源的管理者需要提供)
  - [1.2 操作系统对软件提供](#12-操作系统对软件提供)
    - [1.2.1 命令接口](#121-命令接口)
    - [1.2.2 程序接口](#122-程序接口)
  - [1.3 操作系统对硬件](#13-操作系统对硬件)
- [2 操作系统的特征](#2-操作系统的特征)
  - [2.1共享](#21共享)
  - [2.2虚拟](#22虚拟)
  - [2.3异步](#23异步)
- [3 两种指令、两种处理器状态、两种程序](#3-两种指令两种处理器状态两种程序)
- [4 操作系统的内核](#4-操作系统的内核)
- [5 中断和异常](#5-中断和异常)
  - [5.1 内中断](#51-内中断)
  - [5.2 外中断](#52-外中断)
- [6 系统调用](#6-系统调用)

# 1 操作系统的功能和目标
## 1.1 操作系统作为系统资源的管理者，需要提供
自上往下看需要提供的功能：
1. 处理机管理
2. 存储器管理
3. 文件管理
4. 设备管理
目标：安全高效

## 1.2 操作系统对软件提供
自下往上需要提供的功能：
1. 命令接口
2. 程序接口
3. GUI（图像用户界面）
目标：方便用户使用

### 1.2.1 命令接口
有**联机**命令接口（交互式）和**脱机**命令接口（批处理）

### 1.2.2 程序接口
如dll结尾的文件，需要通过程序间接使用（系统调用又称广义调用）

## 1.3 操作系统对硬件
目标：实现对硬件机器的扩展（扩充机器）

# 2 操作系统的特征
1. 并发 宏观上时同时发生，微观上时交替发生
2. 共享 系统的资源可供内存忠多个并发执行的进程共同使用
3. 虚拟
4. 异步

## 2.1共享
1. 互斥共享方 同一时间段只有一个进程访问资源
2. 同时共享方式 同一时间段可以有多个进程访问资源，微观上可能在交替访问资源

## 2.2虚拟
虚拟存储器技术，空分复用技术
虚拟处理器技术，时分复用技术

## 2.3异步
多个程序并发执行，由于资源有限，程序不是一贯到底，而是走走停停

# 3 两种指令、两种处理器状态、两种程序
1. 指令有特权指令和非特权指令，特权指令如内存清零指令 ，非特权指令如普通的运算指令
2. 处理器状态有用户态和核心态，特权指令只能在核心态才能执行
3. 程序分为内核程序和应用程序，内核程序运行在核心态

# 4 操作系统的内核
内核是计算机上配置的底层**软件**，实现操作系统内核功能的程序就是**内核程序**
1. 时钟管理
2. 中断处理
3. 原语 （一种特殊程序，处于操作系统最底层，具有原子性，不可中断，运行时间短，调用频繁）
4. 对系统资源进行管理的功能如 进程管理 存储器管理 设备管理 （有的操作系统不把这部分归为内核功能）
体系结构有大内核和微内核
**大内核** 把主要功能都作为系统内核，运行在核心态，优点效率高，缺点是内核代码庞大，结构混乱，难以维护   
**小内核** 把基本的功能留在内核，内核功能少，结构清晰，方便维护，缺点是需要频繁切换核心态和用户态，性能低

# 5 中断和异常
本质：发生中断，就需要操作系统介入，进行管理。中断发生后，cpu 进入核心态
用户态到核心态的**唯一途径是中断**，核心态到用户态的途径是执行特权指令设置程序状态字PSW

## 5.1 内中断
在cpu内部和当前执行的指令有关，也称异常、例外、陷入。   
第一种分类方式有**自愿中断**（指令中断）和**强迫中断**（硬件故障和软件中断）。    
第二种分类方式有**陷入**（有意为之，如系统调用），**故障**（错误条件引起，如缺页），**终止**（不可恢复的致命错误，如整数除0）

## 5.2 外中断
外设请求和人工干预

# 6 系统调用
程序接口由一组系统调用进行，可以保证系统的稳定性和安全性
按功能可分为：
1. 设备管理 完成设备的请求释放启动等功能
2. 文件管理 完成文件的读写创建删除等功能
3. 进程控制 完成进程的创建撤销阻塞唤醒等功能
4. 进程通信 完成进程间的消息传递、信号传递等功能
5. 内存管理 完成内存的分配回收等功能
